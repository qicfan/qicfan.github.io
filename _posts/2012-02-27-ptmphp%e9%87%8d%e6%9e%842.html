---
layout: post
title: PTMPHP重构2
tags:
- php
- ptmphp
- 技术杂谈
status: publish
type: post
published: true
meta:
  _edit_last: '1'
  views: '420'
---
最近没啥心情搞重构，就总结下前阵子做的事情。

说到这个重构，自己只是在开始的时候规划了一个大的重构目标和一部分细节，没想到在做的过程中，还是对初期规划作出了很大的修改。

一、在原有基础上增加了PSettings和PRoute类，使核心功能更加清晰

二、增加了middleware，可以在路由分配之前调用，可以使很多非核心功能（用户登录验证等）抽离出核心

三、增加PRequest，包装客户端请求，包括get和post参数的获取等

四、对控制器做出了修改，去掉了很多内置方法，修正了内部逻辑，

五、准备开发widget支持

&nbsp;

大体上是这么多的改变，接下来就是重构剩下的一些类，比如数据库操作等。
